before-happen 发生先后顺序
1、条件至少存在两个离散的变化（进程、线程、协程）ps协程是应用级别的实现；
2、这两者存在资源竞争
3、资源的控制权是竞争的边界（需要处理临界问题）

A、B代表两个独立运行主题；
C—R代表竞争资源；
C-R-ing资源使用中；
A、B使用资源C-R存在互斥；

1、A先发生于B；2、B先发生于A
特别是A和B进入临界区的判断条件存在多种子语句（不可拆分，原子性）
1、密集并发使用原子资源锁
2、低密度并发（场景分析）。临界区的时间窗口很小，触发临界区驱动的窗口较大（比临界区的大），这时候可以不用互斥锁，省去锁逻辑对业务的嵌入，降低代码维护成本
2.1 低密度无锁化条件，需要检查临界区条件（一般有多个条件组成），这时候可以使用before-happen思想，假设A和B先后组合（A先与B，B先与A），临界区的条件是否满足
资源互斥使用过滤，如果不能满足尝试变更临界区条件验证，找到合适的临界区准入条件；

